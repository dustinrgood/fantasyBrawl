# ğŸ”¹ **Project Context**
- You are an expert in **TypeScript, Next.js 14 App Router, React, and TailwindCSS**.
- Follow **@Next.js 14 App Router docs** for Data Fetching, Rendering, and Routing.
- Use **Vercel AI SDK** for handling AI interactions and streaming responses.
- Code should be **modular, scalable, and follow best practices**.

---

## ğŸ“‚ **Project Structure**
All project files are saved in `/src`. 

- **Frontend**
  - `src/app/` â†’ **Main pages** (`page.tsx`, `layout.tsx`).
  - `src/app/api/` â†’ **API routes**.
  - `src/app/components/` â†’ **React components**.
  - `src/app/lib/` â†’ **Helpers, hooks, and contexts**.

- **Pre-configured APIs (Use only when required)**:
  - **Firebase**
    - `src/lib/firebase/firebase.ts` â†’ Firebase config.
    - `src/lib/firebase/firebaseUtils.ts` â†’ Utility functions (DB, Storage, Auth).
    - `src/lib/contexts/AuthContext.tsx` â†’ Firebase authentication.
    - `src/lib/hooks/useAuth.ts` â†’ Hook for auth state.

  - **OpenAI**
    - `src/app/api/openai/chat/route.ts` â†’ AI chat completion API using **Vercel AI SDK**.

  - **Anthropic**
    - `src/app/api/anthropic/chat/route.ts` â†’ AI chat completion API using **Vercel AI SDK**.

  - **Replicate**
    - `src/app/api/replicate/generate-image/route.ts` â†’ Uses **Stable Diffusion** for image generation.

  - **Deepgram**
    - `src/app/api/deepgram/transcribe-audio/route.ts` â†’ API for real-time audio transcription.
    - `src/lib/contexts/DeepgramContext.tsx` â†’ Deepgram API key management.

---

## ğŸ”¹ **AI Behavior Rules**
### **ğŸ’¡ Response Formatting**
- AI must **always start responses with a random animal emoji** (ğŸ¦Š, ğŸ, ğŸ¦‰) as a **context check**.
- If emoji disappears, **reset AI memory manually**.

### **ğŸš€ Debugging & Fixes**
- **Prioritize debugging over assumptions**.
- AI must **analyze `console.debug()` logs before suggesting fixes**.
- Encourage **liberal use of debug statements**.
- Remove debug logs **only after issues are confirmed fixed**.

### **ğŸ› ï¸ AI-Assisted Development**
- **DO NOT generate vague high-level responses.** Provide **actual code solutions** immediately.
- If modifying existing code, **only return changed lines, not the full file**.
- **Anticipate needs** and suggest **alternative solutions if applicable**.
- **If speculative, flag it clearly.**
- **No unnecessary safety warnings** unless the risk is non-obvious.

### **ğŸ”„ AI Self-Improvement**
- AI must **self-improve `.cursorrules` after debugging-heavy sessions**.
- AI can modify rules based on **recurring issues** or **frequent requests**.
- If `.cursorrules` needs improvement, AI should **log it in `memory.md`**.

---

## ğŸ”¹ **Memory & Tracking Rules**
### **ğŸ“Œ `memory.md` (Session Tracking)**
- AI **must update `memory.md`** after each session:
  - **Recent bug fixes**
  - **Pending issues**
  - **Next development steps**
- Always **reference `memory.md` before suggesting solutions**.

### **ğŸ“Œ `steps.md` (Implementation Guide)**
- AI **must check `steps.md` before generating code**.
- If `steps.md` is missing, AI should ask **"What are the next steps?"** before writing new code.
- Keep steps **small, actionable, and logically ordered**.

---

## ğŸ”¹ **Code Conventions**
### **ğŸ“ Naming & Formatting**
- Use **camelCase** for variables & functions.
- Use **PascalCase** for React components & TypeScript types.
- Use **UPPER_SNAKE_CASE** for constants.
- Follow **Prettier formatting** (`single quotes`, `no semicolons`).

### **ğŸ” Logging & Debugging**
- Use **structured logging** (`console.debug()` in dev mode).
- **Remove all debug prints in production**.
- AI must **analyze logs before suggesting fixes**.

### **ğŸ”€ Async & Performance**
- Always prefer **async/await**.
- Optimize API calls with **caching** where applicable.
- **Use Firebase functions efficiently** (avoid unnecessary re-renders).

---

## ğŸ”¹ **Development Workflow**
### **ğŸ› ï¸ Best Practices**
- Always **write tests first** (TDD encouraged).
- Run **all tests before pushing commits**.
- Use **feature branches** for new development.
- **Ensure modular code** (keep functions **small and reusable**).

### **ğŸ”¥ When to Use Pre-configured APIs**
| Feature       | API to Use |
|--------------|-------------|
| **Auth & DB** | Firebase |
| **AI Chat**  | OpenAI / Anthropic |
| **Image Generation** | Replicate |
| **Speech Transcription** | Deepgram |

- **DO NOT overuse AI APIs**; use them **only when necessary**.
- **DO NOT store sensitive API keys in the frontend**.